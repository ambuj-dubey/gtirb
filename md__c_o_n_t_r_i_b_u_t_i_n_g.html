<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GTIRB: CONTRIBUTING</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GTIRB
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">GrammaTech Intermediate Representation for Binaries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">CONTRIBUTING </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md38">Contributing</a><ul><li class="level2"><a href="#autotoc_md39">Code of Conduct</a></li>
<li class="level2"><a href="#autotoc_md40">General Guidelines</a><ul><li class="level3"><a href="#autotoc_md41">pre-commit</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md42">C++ Code Requirements</a><ul><li class="level3"><a href="#autotoc_md43">Testing Development</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md44">Python Code Requirements</a><ul><li class="level3"><a href="#autotoc_md45">Testing Development</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md46">Documentation</a><ul><li class="level3"><a href="#autotoc_md47">Building Documentation</a></li>
<li class="level3"><a href="#autotoc_md48">Contributing Markdown Documentation</a></li>
<li class="level3"><a href="#autotoc_md49">Graphviz</a></li>
<li class="level3"><a href="#autotoc_md50">Python</a></li>
<li class="level3"><a href="#autotoc_md51">Common Lisp</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md38"></a>
Contributing</h1>
<p><a class="anchor" id="contributing"></a></p>
<h2><a class="anchor" id="autotoc_md39"></a>
Code of Conduct</h2>
<p><a class="anchor" id="code-of-conduct"></a></p>
<p>Please read the GTIRB Code of Conduct.</p>
<h2><a class="anchor" id="autotoc_md40"></a>
General Guidelines</h2>
<p><a class="anchor" id="general-guidelines"></a></p>
<ul>
<li>Text files may not have trailing whitespace.</li>
<li>Text files must end with a trailing newline.</li>
<li>All tests should be able to run and pass. This can be checked by running <code>make check</code> on your build directory after running <code>cmake</code>.</li>
<li>All CMake files shall be formatted with <a href="https://pypi.org/project/cmake-format/">cmake-format</a>. A <code>.cmake-format</code> file is provided in the root directory for the project, and a pass through this tool is included as part of our <code>pre-commit</code> configuration (see below for details).</li>
</ul>
<h3><a class="anchor" id="autotoc_md41"></a>
pre-commit</h3>
<p><a class="anchor" id="pre-commit"></a></p>
<p>In general, code must follow a unified format. To make compliance with this format easier, we recommend the use of <a href="https://pre-commit.com/"><code>pre-commit</code></a> with the provided configuration file, <code>.pre-commit-config.yaml</code>, to manage formatting. To use <code>pre-commit</code>:</p>
<ol type="1">
<li>If <code>pre-commit</code> is not already installed on your system, install it now with <a href="https://pypi.org/project/pip/"><code>pip</code></a>. <div class="fragment"><div class="line">pip3 install pre-commit</div>
</div><!-- fragment --></li>
<li>If <a href="https://clang.llvm.org/docs/ClangFormat.html"><code>clang-format</code></a> is not already installed on your system, install it now.</li>
<li><p class="startli">Install the formatters as a pre-commit hook. In the gtirb root directory: </p><div class="fragment"><div class="line">pre-commit install</div>
</div><!-- fragment --><p class="startli">If you prefer to run <code>pre-commit</code> manually instead, run this before all commits: </p><div class="fragment"><div class="line">pre-commit run</div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md42"></a>
C++ Code Requirements</h2>
<p><a class="anchor" id="c++-code-requirements"></a></p>
<ul>
<li>All code shall be formatted with <a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a>. A <code>.clang-format</code> is provided in the root directory for the project, and a pass through this tool is included as part of our <code>pre-commit</code> configuration.</li>
<li>Code should generally follow the C++ Core Guidelines recommendations.</li>
<li>Code should generally allow for thread safety.<ul>
<li>No static variables.</li>
<li>No globals</li>
<li>Free functions should not maintain state.</li>
<li>Use caution when using iterators to guard against invalidation.</li>
</ul>
</li>
<li>Maintain const-correctness.</li>
<li>Use UpperCamelCase for type names.</li>
<li>Use UpperCamelCase for enum members.</li>
<li>Use UpperCamelCase for variable and class members.</li>
<li>Use lowerCamelCase for function and method names.</li>
<li>Avoid <code>using namespace std</code></li>
<li>Use <code>auto</code> when the deduced type is explicitly spelled out in the initialization or if the deduced type is an abstract type alias. Always explicitly specify type qualifiers, pointers, and references. E.g., <div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> *Ptr = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>Foo *<span class="keyword">&gt;</span>(SomePtr);</div>
<div class="line"><span class="keyword">auto</span> Val = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(SomeValue);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> Iter = SomeContainer.begin(), End = SomeContainer.end(); Iter != End; ++Iter) {}</div>
</div><!-- fragment --></li>
<li>Use <code>auto</code> to make code more readable, but prefer <code>auto &amp;</code> or <code>auto *</code> to avoid unexpected copies.</li>
<li><code>#include</code> as little as possible to reduce compile times. Use forward declarations of classes when possible to avoid including their definitions.</li>
</ul>
<h3><a class="anchor" id="autotoc_md43"></a>
Testing Development</h3>
<p><a class="anchor" id="testing-development"></a></p>
<ul>
<li>All code you care about should be tested.</li>
<li>Any code you don't care about should be removed.</li>
<li>C++ code should be tested on Linux using GCC and Clang, and on Windows using Visual Studio.</li>
<li>Code testing is done via Google Test.</li>
<li>Test names are prefixed with the type of test they are (<code>Unit_</code>, <code>System_</code>, <code>Integration_</code>).</li>
<li>No unit test should take more than 0.5 seconds.</li>
</ul>
<h2><a class="anchor" id="autotoc_md44"></a>
Python Code Requirements</h2>
<p><a class="anchor" id="python-code-requirements"></a></p>
<ul>
<li>Code must be <a href="https://www.python.org/dev/peps/pep-0008/">PEP8</a> compliant. To check for PEP8 compliance, <a href="https://pypi.org/project/flake8/">flake8</a> is recommended, and included as part of our <code>pre-commit</code> configuration.</li>
<li>All code must be formatted with <a href="https://pypi.org/project/black/">Black</a> (set to line lengths of 79, for PEP8 compliance). A pass through this tool is included as part of our <code>pre-commit</code> configuration.<ul>
<li>Please note that <code>black</code> only works on Python version 3.6 and newer. This is newer than what is available on some OSes by default (for example, Ubuntu 16), so you may have to install Python 3.6 or newer to run <code>black</code>. If installing Python 3.6+ on your system is not possible, there exists <a href="https://black.now.sh/?version=stable&amp;state=_Td6WFoAAATm1rRGAgAhARYAAAB0L-Wj4AA-ACxdAD2IimZxl1N_W1ktIvcnCRyzdeeGA586U8RMKbisP9D6xUd8v4usX-jR3lIAACNC8ndFJAQXAAFIPxtdQK4ftvN9AQAAAAAEWVo=">an online interface to Black</a> you can manually enter files into.</li>
</ul>
</li>
<li>The Python API should be made to run on all version of Python 3.</li>
<li>Use <code>UpperCamelCase</code> for type names, <code>UPPER_CASE</code> for constant names, and <code>snake_case</code> for other identifier names.</li>
</ul>
<h3><a class="anchor" id="autotoc_md45"></a>
Testing Development</h3>
<p><a class="anchor" id="testing-development"></a></p>
<ul>
<li>All code you care about should be tested.</li>
<li>Any code you don't care about should be removed.</li>
<li>Code testing is done via the built-in <code>unittest</code> framework.</li>
<li>No unit test should take more than 0.5 seconds.</li>
</ul>
<h2><a class="anchor" id="autotoc_md46"></a>
Documentation</h2>
<p><a class="anchor" id="documentation"></a></p>
<p>The GTIRB documentation consists of complete documentation for all components of the GTIRB API, along with examples and other usage information.</p>
<h3><a class="anchor" id="autotoc_md47"></a>
Building Documentation</h3>
<p><a class="anchor" id="building-documentation"></a></p>
<p>At minimum, you will need <a href="https://cmake.org/">CMake</a> and <a href="http://www.doxygen.nl/">Doxygen</a>. To build the documentation:</p>
<ol type="1">
<li>Create and change to a temporary build directory. We will refer to this directory as <code>build</code>.</li>
</ol>
<div class="fragment"><div class="line">&gt; mkdir build</div>
<div class="line">&gt; cd build</div>
</div><!-- fragment --><ol type="1">
<li>Build the documentation.</li>
</ol>
<div class="fragment"><div class="line">build&gt; cmake &lt;PATH_TO_GTIRB&gt; [&lt;api_options&gt;]</div>
<div class="line">build&gt; cmake --build . --target doc</div>
</div><!-- fragment --><ol type="1">
<li>Open the documentation home page <code>build/doc/html/index.html</code> in your browser.</li>
</ol>
<p>The <code>&lt;api_options&gt;</code> are as follows</p>
<ul>
<li><p class="startli"><code>-DGTIRB_CXX_API=OFF</code> : do not generate C++ API documentation.</p>
<p class="startli">If this option is not specified, <code>cmake</code> will attempt to generate C++ API documentation, failing (along with the documentation build as a whole) if <a href="http://www.doxygen.nl/">Doxygen</a> is not available.</p>
</li>
<li><p class="startli"><code>-DGTIRB_CL_API=OFF</code> : do not generate Common Lisp API documentation.</p>
<p class="startli">If this option is not specified, <code>cmake</code> will attempt to generate Common Lisp API documentation if and only if it can locate a SBCL/Quicklisp installation, failing if <a href="https://github.com/eschulte/simpler-documentation-template">simpler-documentation-template (SDT)</a> is not available.</p>
</li>
<li><p class="startli"><code>-DGTIRB_PY_API=OFF</code> : do not generate Python API documentation.</p>
<p class="startli">If this option is not specified, <code>cmake</code> will attempt to generate Python API documentation if and only if it can locate a Python installation, failing if <a href="https://www.sphinx-doc.org/en/master/">Sphinx</a>, <a href="https://pypi.org/project/sphinx-autodoc-typehints/">sphinx-autodoc-typehints</a>, or the Python API dependencies are not available.</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md48"></a>
Contributing Markdown Documentation</h3>
<p><a class="anchor" id="contributing-markdown-documentation"></a></p>
<p>To add a new markdown document to the documentation:</p>
<ol type="1">
<li>Create the new document as a child of <code>/doc</code>.<ul>
<li>File names start with <code>gtirb</code>.</li>
<li>File extension is <code>.md</code>.</li>
<li>Use github markdown syntax.</li>
<li>Wrap your markdown documents at 80 columns.</li>
</ul>
</li>
<li>Edit <code>/doc/general/Doxyfile.in</code> to add the basename of your new markdown document to the <code>INPUT</code> rule setting.</li>
<li>Edit <code>/doc/general/CMakeLists.txt</code> to add your new markdown document to <code>MDFILES_IN</code>. Ordering is not important.</li>
<li>Integrate your new markdown document into the documentation, either by linking to it from an existing page or by updating <code>/doc/general/DoxygenLayout.xml</code> to add an entry to the <b>More Information</b> tab.</li>
<li><a href="#building-documentation">Build the documentation</a> and check that your new page is present and rendered correctly.<ul>
<li>If it is not rendered correctly, you may need to add a new preprocessing step to <code>doc/general/preprocmd.py</code> to rewrite the corresponding github-style markdown into something Doxygen can handle correctly.</li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md49"></a>
Graphviz</h3>
<p><a class="anchor" id="graphviz"></a></p>
<ul>
<li>File names start with <code>gtirb</code>.</li>
<li>The color palette is <code>black</code>, <code>lightblue</code>, <code>cornflowerblue</code>, and <code>coral</code>.</li>
<li>Render <code>.dot</code> files to the same file name with a <code>.png</code> extension.<ul>
<li>Example: <code>dot -Tpng gtirbScope.dot &gt; gtirbScope.png</code></li>
</ul>
</li>
<li>Use the <code>arial</code> font.</li>
</ul>
<h3><a class="anchor" id="autotoc_md50"></a>
Python</h3>
<p><a class="anchor" id="python"></a></p>
<p>For the Python API, <a href="https://www.sphinx-doc.org/en/master/">Sphinx</a> and <a href="https://pypi.org/project/sphinx-autodoc-typehints/">related plugins</a> are required. To install these via <a href="https://pip.pypa.io/en/stable/">pip</a>, run:</p>
<div class="fragment"><div class="line">pip3 install sphinx sphinx-autodoc-typehints</div>
</div><!-- fragment --><p>You will also need all the dependencies of the GTIRB Python API itself. If you haven't already installed the Python API (and don't want to do so now) you can install just its dependencies as follows.</p>
<div class="fragment"><div class="line">cd &lt;PATH_TO_GTIRB&gt;/build/python</div>
<div class="line">python3 setup.py egg_info</div>
<div class="line">pip3 install -r gtirb.egg-info/requires.txt</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md51"></a>
Common Lisp</h3>
<p><a class="anchor" id="common-lisp"></a></p>
<p>For the Common Lisp API, <a href="https://github.com/eschulte/simpler-documentation-template">simpler-documentation-template (SDT)</a> is required. This package should automatically be downloaded via the build process; see <code>cl/README.md</code> for details on how to prepare the Common Lisp API. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
